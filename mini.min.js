/**
 *   ____ .     ____  ____  ____    ____.
 *   \   (/_\___\  (__\  (__\  (\___\  (/
 *   / ._/  ( . _   \  . /   . /  . _   \_
 * _/    ___/   /____ /  \_ /  \_    ____/
 * \   _/ \____/   \____________/   /
 *  \_t:_____r:_______o:____o:___p:/ [ troopjs - 3.0.0-3+5908d7d ]
 *
 * @license http://troopjs.mit-license.org/ Â© Mikael Karon
 */

define("troopjs/version",[],"3.0.0-3+5908d7d"),define("troopjs-utils/unique",[],function(){"use strict";var a="length";return function(b){var c,d,e,f,g=this,h=g[a];if(b)a:for(d=f=0;h>d;d++){for(c=g[d],e=0;d>e;e++)if(b.call(g,c,[e])===!0)continue a;g[f++]=c}else a:for(d=f=0;h>d;d++){for(c=g[d],e=0;d>e;e++)if(c===g[e])continue a;g[f++]=c}return g[a]=f,f}}),define("troopjs-composer/mixin/decorator",["poly/object"],function(){"use strict";return function(a){Object.defineProperties(this,{decorate:{value:a}})}}),define("troopjs-composer/mixin/factory",["module","troopjs-utils/unique","./decorator","poly/object"],function(a,b,c){"use strict";function d(){return e.apply(this,arguments)()}function e(){var a=[this];return k.apply(a,arguments),g.apply(null,a)}function f(){var a=this,b=a[h];return o in b?b[o]:m.call(a)}function g(){function a(){var b,c=this instanceof a?this:Object.create(Y),d=arguments;for(Object.defineProperty(c,t,{value:a}),b=0;o>b;b++)d=W[b].apply(c,d)||d;return c}var g,j,m,o,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=[],U=arguments,V=U[p],W=[],X=T[A]=[],Y={},Z={},$={};for(J=0;V>J;J++){if(m=U[J],typeof m===n){if(u in m?k.apply(W,m[u]):k.call(W,m),v in m&&l.apply(T,m[v]),m===m[h][t])continue;m=m[h]}for(H=Object.getOwnPropertyNames(m),K=0,I=H[p];I>K;K++){for(F=G=H[K],L=0;E>L&&(M=D[L],(F=F.replace(M.pattern,M.replace))===G);L++);(Q=C.exec(F))?(g={},g[w]=N=Q[1],g[y]=Q[2],g[z]=P=Q[3],g[B]=N+"/"+P,g[x]=m[G],l.call(T,g)):(S=Object.getOwnPropertyDescriptor(m,G),R=S[x],Z[F]=R instanceof c?R[s](Z[F]||{enumerable:!0,configurable:!0,writable:!0},F,Z):S)}}for(Object.defineProperties(Y,Z),o=b.call(W),j=b.call(T),J=0;j>J;J++)g=T[J],N=g[w],P=g[z],F=g[B],N=N in T?T[N]:T[X[X[p]]=N]=[],O=A in N?N[A]:N[A]=[],P=P in N?N[P]:N[O[O[p]]=P]=T[F]=[],N[N[p]]=P[P[p]]=g;return $[h]={value:Y},$[u]={value:W},$[v]={value:T},$[i]={value:f},$[q]={value:e},$[r]={value:d},Object.defineProperties(a,$),a}var h="prototype",i="toString",j=Array[h],k=j.push,l=j.unshift,m=Object[h][i],n="function",o="displayName",p="length",q="extend",r="create",s="decorate",t="constructor",u="constructors",v="specials",w="group",x="value",y="features",z="type",A="types",B="name",C=/^(\w+)(?::(.+?))?\/([-_./\d\w\s]+)$/,D=a.config().pragmas||[],E=D[p];return Object.defineProperty(g,r,{value:function(){return g.apply(null,arguments)()}}),g}),define("troopjs-core/mixin/base",["troopjs-composer/mixin/factory"],function(a){var b=0,c="instanceCount";return a(function(){this[c]=++b},{instanceCount:b,displayName:"core/mixin/base",toString:function(){var a=this;return a.displayName+"@"+a[c]}})}),define("troopjs-core/event/runner/sequence",["when"],function(a){"use strict";var b,c="head",d="next",e="callback",f="context";return function(g,h,i){var j,k=[],l=0,m=[],n=0;for(j=h[c];j!==b;j=j[d])m[n++]=j;n=0;var o=function(c,d){var g;return d!==!0&&(k[l++]=c),(g=m[n++])!==b?a(g[e].apply(g[f],i),o):a.resolve(k)};return o(i,!0)}}),define("troopjs-core/event/emitter",["../mixin/base","./runner/sequence"],function(a,b){"use strict";function c(a,b){var c=this;return b=b||{},b[j]=a,c[c[i]]=c[a]=b}var d,e=Array.prototype.slice,f=Object.prototype.toString,g="[object String]",h="handlers",i="length",j="type",k="runner",l="context",m="callback",n="data",o="head",p="tail",q="next",r=a.extend(function(){this[h]=[]},{displayName:"core/event/emitter",on:function(a,b,e,f){var g,i=this,k=i[h];if(e===d)throw new Error("no callback provided");return a in k?(k=k[a],g={},g[m]=e,g[l]=b,g[n]=f,k[p]=p in k?k[p][q]=g:k[o]=g):(k=c.call(k,a,{}),k[j]=a,k[o]=k[p]=g={},g[m]=e,g[l]=b,g[n]=f),i},off:function(a,b,c){var e,f,g,i=this,j=i[h];if(a in j&&(j=j[a],o in j)){for(e=j[o];e!==d;e=e[q])(b&&e[l]!==b||c&&e[m]!==c)&&(f?g=g[q]=e:f=g=e);f&&g?(j[o]=f,j[p]=g,delete g[q]):(delete j[o],delete j[p])}return i},emit:function(a){var d,i=this,l=a,m=i[h];if(f.call(a)===g)a={},a[k]=d=b,a[j]=l;else{if(!(j in a))throw Error("first argument has to be of type '"+g+"' or have a '"+j+"' property");a[k]=d=a[k]||b,l=a[j]}return m=m[l]||c.call(m,l,{}),d.call(i,a,m,e.call(arguments,1))}});return r.createHandlers=c,r}),define("troopjs-utils/merge",["poly/object"],function(){"use strict";var a,b=null,c=Array.prototype,d=c.concat,e=Object.prototype,f=e.toString,g=f.call(e),h=f.call(c),i="length";return function j(c){var e,k,l,m,n,o,p,q,r,s,t=this;if(t!==a&&t!==b)for(l=0,n=arguments[i];n>l;l++)if((c=arguments[l])!==a&&c!==b)for(k=Object.keys(c),m=0,o=k[i];o>m;m++)e=k[m],p=c[e],q=t[e],e in t?(r=f.call(p),s=f.call(q),s===g&&r===g?j.call(q,p):t[e]=s===h&&r===h?d.call(q,p):p):t[e]=p;return t}}),define("troopjs-composer/decorator/before",["../mixin/decorator"],function(a){"use strict";var b,c="value";return function(d){return new a(function(a){var e=a[c];return a[c]=e?function(){var a=this,c=d.apply(a,arguments);return e.apply(a,c!==b?c:arguments)}:d,a})}}),define("troopjs-composer/decorator/around",["../mixin/decorator"],function(a){"use strict";var b="value",c=function(){};return function(d){return new a(function(a){return a[b]=d(a[b]||c),a})}}),define("troopjs-core/component/base",["../event/emitter","../event/runner/sequence","troopjs/version","troopjs-utils/merge","troopjs-composer/decorator/before","troopjs-composer/decorator/around","when","poly/array"],function(a,b,c,d,e,f,g){"use strict";var h,i=Array.prototype,j=i.push,k=a.createHandlers,l="configuration",m="runner",n="handlers",o="head",p="context",q="name",r="type",s="value",t="phase",u="stop",v="initialize",w="started",x="finalized",y="finished",z="sig",A=z+"/setup",B=z+"/teardown",C="on",D=new RegExp("^"+z+"/(.+)");return a.extend(function(){var a=this,b=a.constructor.specials[z]||i;b.forEach(function(b){a.on(b[q],b[s])}),a[l]={}},{version:c,displayName:"core/component/base","sig/initialize":function(){var a=this;return g.map(a.constructor.specials[C]||i,function(b){return a.on(b[r],b[s])})},"sig/finalize":function(){var a=this;return g.map(a[n].reverse(),function(b){return a.off(b[r])})},configure:function(){return d.apply(this[l],arguments)},on:e(function(a,c,d){var e=this,f=a,g=e[n],i=g[f];return i===h&&(i=k.call(g,f)),o in i||D.test(f)||(a={},a[r]=A,a[m]=b,e.emit(a,f,i)),[f,e,c,d]}),off:f(function(a){return function(c,d){var e=this,f=c;a.call(e,f,e,d);var g=e[n],i=g[f];return i===h&&(i=k.call(g,f)),o in i||D.test(f)||(c={},c[r]=B,c[m]=b,e.emit(c,f,i)),e}}),signal:function(a){var b=this;return arguments[0]="sig/"+a,b.emit.apply(b,arguments)},start:function(a){var b,c=this,d=c.signal;if((b=c[t])!==h&&b!==x)throw new Error("Can't transition phase from '"+b+"' to '"+v+"'");return a=[c[t]=v],j.apply(a,arguments),d.apply(c,a).then(function(b){return a[0]=c[t]="start",d.apply(c,a).then(function(a){return c[t]=w,i.concat(b,a)})})},stop:function(a){var b,c=this,d=c.signal;if((b=c[t])!==w)throw new Error("Can't transition phase from '"+b+"' to '"+u+"'");return a=[c[t]=u],j.apply(a,arguments),d.apply(c,a).then(function(b){return a[0]=c[t]="finalize",d.apply(c,a).then(function(a){return c[t]=x,i.concat(b,a)})})},task:function(a,b){var c=this,d=g.promise(a).ensure(function(){d[y]=new Date});return d[p]=c,d[w]=new Date,d[q]=b,c.signal("task",d).yield(d)}})}),define("troopjs-core/component/runner/pipeline",["when"],function(a){"use strict";var b,c=Object.prototype.toString,d="[object Arguments]",e="[object Array]",f="context",g="callback",h="head",i="next";return function(j,k,l){var m,n=j[f],o=j[g],p=[],q=0;for(m=k[h];m!==b;m=m[i])(n===b||m[f]===n)&&(o&&m[g]!==o||(p[q++]=m));q=0;var r=function(h){var i,j;return h!==b&&h!==l&&(l=(j=c.call(h))===e||j===d?h:[h]),(i=p[q++])!==b?a(i[g].apply(i[f],l),r):a.resolve(l)};return r(l)}}),define("troopjs-core/pubsub/runner/constants",{pattern:/^(?:initi|fin)alized?$/}),define("troopjs-core/pubsub/runner/pipeline",["./constants","when"],function(a,b){"use strict";var c,d=Object.prototype.toString,e="[object Arguments]",f="[object Array]",g="context",h="callback",i="head",j="next",k="phase",l="memory",m=a.pattern;return function(a,n,o){var p,q=a[g],r=a[h],s=[],t=0;for(p=n[i];p!==c;p=p[j])(q===c||p[g]===q)&&(r===c||p[h]===r)&&(s[t++]=p);t=0;var u=function(a){var i,j,p;for(a!==c&&a!==o&&(o=(p=d.call(a))===f||p===e?a:[a]);(j=s[t++])&&(i=j[g])&&m.test(i[k]););return j!==c?b(j[h].apply(i,o),u):b.resolve(n[l]=o)};return u(o)}}),define("troopjs-composer/decorator/from",["../mixin/decorator"],function(a){"use strict";var b,c="value",d="prototype";return function(e,f){return"string"==typeof e&&(f=e,e=b),new a(function(a,b,g){return b=f||b,a[c]=e?e[d][b]:g[b][c],a})}}),define("troopjs-core/pubsub/hub",["../event/emitter","./runner/pipeline","troopjs-composer/decorator/from"],function(a,b,c){"use strict";var d,e="memory",f="handlers",g="runner",h="type";return a.create({displayName:"core/pubsub/hub",subscribe:c("on"),unsubscribe:c("off"),publish:function(a){var c=this,d={};return d[h]=a,d[g]=b,arguments[0]=d,c.emit.apply(c,arguments)},peek:function(a,b){var c;return(c=this[f][a])!==d&&e in c?c[e]:b}})}),define("troopjs-core/component/gadget",["./base","./runner/pipeline","when","../pubsub/hub"],function(a,b,c,d){"use strict";var e,f=null,g=Array.prototype,h=g.push,i="runner",j="context",k="callback",l="proxy",m="features",n="name",o="type",p="value",q="hub",r=new RegExp("^"+q+"/(.+)");return a.extend({displayName:"core/component/gadget","sig/initialize":function(){var a=this;return c.map(a.constructor.specials[q]||g,function(b){return a.subscribe(b[o],b[p],b[m])})},"sig/start":function(){var a=this,d={},f=a.constructor.specials[q]||g;return f=f.map(function(c){var e,f;return"memory"===c[m]&&(e=a.peek(c[o],d))!==d&&(f={},f[o]=c[n],f[i]=b,f[j]=a,f[k]=c[p],f=[f].concat(e)),f}).filter(function(a){return a!==e}),c.map(f,function(b){return a.emit.apply(a,b)})},"sig/setup":function(a,c){var e,g=this;(e=r.exec(a))!==f&&d.subscribe(e[1],g,c[l]=function(c){return c={},c[o]=a,c[i]=b,c=[c],h.apply(c,arguments),g.emit.apply(g,c)})},"sig/teardown":function(a,b){var c,e=this;(c=r.exec(a))!==f&&d.unsubscribe(c[1],e,b[l])},"sig/task":function(a){return this.publish("task",a)},publish:function(){return d.publish.apply(d,arguments)},subscribe:function(a,b,c){return this.on("hub/"+a,b,c)},unsubscribe:function(a,b){return this.off("hub/"+a,b)},peek:function(a,b){return d.peek(a,b)}})}),define("troopjs-composer/decorator/after",["../mixin/decorator"],function(a){"use strict";var b,c="value";return function(d){return new a(function(a){var e=a[c];return a[c]=e?function(){var a=this,c=e.apply(a,arguments),f=d.apply(a,arguments);return f!==b?f:c}:d,a})}}),define("troopjs-browser/dom/config",["module","troopjs-utils/merge","jquery"],function(a,b,c){var d={};return d.querySelectorAll=c.find,d.matchesSelector=c.find.matchesSelector,b.call(d,a.config())}),define("troopjs-browser/dom/selector",["troopjs-composer/mixin/factory","./config"],function(a,b){function c(){return[u]}function d(a){return[a.nodeName.toUpperCase()]}function e(a){var b,c;return(b=a.className)!==i&&("string"==typeof b?c=b.split(C):"object"==typeof b&&B in b&&(c=b[B].split(C))),c}function f(a){var b;return(b=a.id)!==i&&[b]}function g(a){var b=a[k],c=b,d=a.charAt(--b),e=!1;a:for(;b>=0;)switch(d){case t:if((d=a.charAt(--b))!==s&&!e){b+=2;break a}break;case z:e=(d=a.charAt(--b))!==s;break;case y:(e=(d=a.charAt(--b))===s)||(c=b+1);break;case v:case x:case w:(d=a.charAt(--b))&&d!==i&&d!==s&&d!==t&&!e&&(c=b+1);break;default:d=a.charAt(--b)}return a.substring(b,c)||u}function h(a,b){return a[A]-b[A]}var i,j=Array.prototype.slice,k="length",l="indexes",m="indexed",n="indexer",o="class",p="id",q="tag",r="universal",s="\\",t=" ",u="*",v="#",w=".",x=":",y="[",z="]",A="count",B="baseVal",C=/\s+/,D=(b.querySelectorAll,b.matchesSelector),E=a(function(){var a=this;a[l]=[],a[A]=0},{add:function(a,b){var h,s,t,x,y=this,z=y[l],B=g(a);switch(b=j.call(arguments),b[A]=y[A]++,B.charAt(0)){case v:x=p,s=f,B=B.substring(1);break;case w:x=o,s=e,B=B.substring(1);break;case u:x=r,s=c;break;default:x=q,s=d,B=B.toUpperCase()}return(t=z[x])!==i?h=t[m]:(t=z[x]=z[z[k]]={},t[n]=s,h=t[m]={}),B in h?h[B].push(b):h[B]=[b],y},matches:function(a){var b,c,d,e,f,g,j,o,p=this,q=p[l],r=q[k],s=[],t=0;if(!a)return s;for(;r--;)for(d=q[r],b=d[n],c=d[m],e=b(a),f=e[k];f--;)if((g=c[e[f]])!==i)for(o=g[k];o--;)j=g[o],D(a,j[0])&&(s[t++]=j);return s.sort(h)}});return E.tail=g,E}),define("troopjs-browser/component/runner/sequence",["../../dom/selector","poly/array"],function(a){var b,c="context",d="callback",e="data",f="head",g="next",h="selector",i="modified";return function(j,k,l){var m,n,o=k[i],p=l[0];if((m=k[h])===b||m[i]!==o)for(m=k[h]=a(),m[i]=o,n=k[f];n!==b;n=n[g])m.add(n[e]||"*",n);return m.matches(p.target).reduce(function(a,b){if(p.isImmediatePropagationStopped())return a;a===!1&&(p.stopPropagation(),p.preventDefault());var e=b[1];return e[d].apply(e[c],l)},b)}}),define("troopjs-browser/loom/config",["module","troopjs-utils/merge"],function(a,b){"use strict";return b.call({$warp:"$warp",$weft:"$weft",weave:"data-weave",unweave:"data-unweave",woven:"data-woven"},a.config())}),define("troopjs-utils/getargs",[],function(){"use strict";var a=Array.prototype.push,b=String.prototype.substring,c=/^(?:false|true)$/i,d=/^true$/i,e=/^\d+$/;return function(){var f,g,h,i,j,k,l=this,m=[],n=!1;for(g=h=i=0,f=l.length;f>i;i++)switch(j=l.charAt(i)){case'"':case"'":n===j?(n=!1,a.call(m,b.call(l,g,h))):n=j,g=h=i+1;break;case",":if(n){h=i+1;break}g!==h&&(k=b.call(l,g,h),c.test(k)?k=d.test(k):e.test(k)&&(k=+k),a.call(m,k)),g=h=i+1;break;case" ":case"	":if(n){h=i+1;break}g===h&&(g=h=i+1);break;default:h=i+1}return g!==h&&(k=b.call(l,g,h),c.test(k)?k=d.test(k):e.test(k)&&(k=+k),a.call(m,k)),m}}),define("troopjs-utils/defer",["when","poly/array"],function(a){"use strict";var b=Array.prototype.slice;return function(){var c=a.defer();return["resolve","reject","progress"].forEach(function(a){var c=this,d=c.resolver[a];c[a]=function(){d.apply(c,arguments)},c[a+"With"]=function(a){d.apply(a,b.call(arguments,1))}},c),c}}),define("troopjs-browser/loom/weave",["./config","require","when","jquery","troopjs-utils/getargs","troopjs-utils/defer","poly/array"],function(a,b,c,d,e,f){"use strict";var g,h=null,i=Array.prototype,j=i.map,k=i.push,l=i.shift,m="weave",n="woven",o=a.$warp,p=a.$weft,q=a[m],r=a[n],s=/[\s,]+/;return function(){var a=arguments;return c.all(j.call(this,function(i){var j,t,u=d(i),v=u.data(),w=v[o]||(v[o]=[]),x=[],y=u.attr(q)||"",z=/[\s,]*(((?:\w+!)?([\w\d_\/\.\-]+)(?:#[^(\s]+)?)(?:\(([^\)]+)\))?)/g,A=function(a){var b=[];a.forEach(function(a){b.push(a[p][n])}),u.attr(r,function(a,c){return(c!==g?c.split(s):[]).concat(b).join(" ")})};u.removeAttr(q);for(var B;(t=z.exec(y))!==h;)B=t[4],j=[t[2],u.get(0),t[3]],j[m]=t[1],B!==g&&k.apply(j,e.call(B).map(function(a){return a in v?v[a]:a})),k.call(x,j);return c.map(x,function(d){var e=c.defer(),g=e.resolver,h=e.promise,i=l.call(d);return h[m]=d[m],k.call(w,h),b([i],function(b){var c,i;try{c=b.apply(b,d),c[p]=h,h[n]=c.toString(),c.trigger?(e=f(),c.start(e),i=e.promise):i=c.start.apply(c,a),g.resolve(i.yield(c))}catch(j){g.reject(j)}},g.reject),h}).tap(A)}))}}),define("troopjs-browser/loom/unweave",["./config","when","jquery","poly/array","troopjs-utils/defer"],function(a,b,c,d){"use strict";var e,f=null,g=Array.prototype,h=g.map,i=g.push,j="weave",k="unweave",l="woven",m="length",n=a.$warp,o=a.$weft,p=a[j],q=a[l],r=a[k],s=/[\s,]+/;return function(){var a=arguments;return b.all(h.call(this,function(g){var h,k,t,u,v,w=c(g),x=w.data(),y=x[n]||(x[n]=[]),z=[],A=w.attr(r),B=[],C=/[\s,]*([\w_\/\.\-]+)(?:@(\d+))?/g,D=function(a){var b={},c=[];a.forEach(function(a){var d=a[o];b[d[l]]=1,c.push(d[j])}),w.attr(q,function(a,c){var d=[];return c!==e&&i.apply(d,c.split(s).filter(function(a){return!(a in b)})),0===d[m]?null:d.join(" ")}).attr(p,function(a,b){return(b!==e?b.split(s):[]).concat(c).join(" ")})};if(w.removeAttr(r),A===e)i.apply(z,y),y[m]=0;else{for(;(h=C.exec(A))!==f;)i.call(B,"^"+h[1]+"@"+(h[2]||"\\d+")+"$");for(B=new RegExp(B.join("|")),u=v=0,t=y[m];t>u;u++)k=y[u],B.test(k[l])?i.call(z,k):y[v++]=k;y[m]=v}return b.map(z,function(b){var c,e;return b.trigger?(c=d(),b.stop(c),e=c.promise):e=b.stop.apply(b,a),e.yield(b)}).tap(D)}))}}),define("troopjs-jquery/destroy",["jquery"],function(a){"use strict";var b="destroy";a.event.special[b]={noBubble:!0,trigger:function(){return!1},remove:function(b){var c=this;b&&b.handler.call(c,a.Event(b.type,{data:b.data,namespace:b.namespace,target:c}))}}}),define("troopjs-browser/component/widget",["troopjs-core/component/gadget","troopjs-composer/decorator/before","troopjs-composer/decorator/after","./runner/sequence","jquery","when","troopjs-utils/merge","../loom/config","../loom/weave","../loom/unweave","troopjs-jquery/destroy"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){function b(b){var c=this;return i.call(a.call(c[t],typeof b===s?b.apply(c,p.call(arguments,1)):b).find(D))}return b}function l(a){F.test(a)&&(this.handlers[a][u]=(new Date).getTime())}var m,n=null,o=Array.prototype,p=o.slice,q=o.push,r=e.fn.get,s="function",t="$element",u="modified",v="proxy",w="dom",x="features",y="name",z="value",A="type",B="runner",C=h.$weft,D="["+h.weave+"]",E="["+h.woven+"]",F=new RegExp("^"+w+"/(.+)");return a.extend(function(a,b){var c,d=this;if(a===m)throw new Error("No $element provided");if(a.jquery)(c=a.get)!==r&&(a=e(c.call(a,0)));else{if(!a.nodeType)throw new Error("Unsupported widget element");a=e(a)}d[t]=a,b!==m&&(d.displayName=b)},{displayName:"browser/component/widget","sig/initialize":function(){var a=this;return f.map(a.constructor.specials[w]||o,function(b){return a.on(b[y],b[z],b[x])})},on:c(l),off:b(l),"sig/setup":function(a,b){var c,e=this;(c=F.exec(a))!==n&&e[t].on(c[1],n,e,b[v]=function(b,c){return c={},c[A]=a,c[B]=d,c=[c],q.apply(c,arguments),e.emit.apply(e,c)})},"sig/teardown":function(a,b){var c,d=this;(c=F.exec(a))!==n&&d[t].off(c[1],n,b[v])},"sig/task":function(a){this[t].trigger("task",[a])},"dom/destroy":function(){this.unweave()},weave:function(){return i.apply(this[t].find(D),arguments)},unweave:function(){var a=this[t].find(E);return this[C]&&(a=a.addBack()),j.apply(a,arguments)},before:k(e.fn.before),after:k(e.fn.after),html:k(e.fn.html),text:k(e.fn.text),append:k(e.fn.append),prepend:k(e.fn.prepend)})}),define("troopjs-core/component/service",["./gadget"],function(a){"use strict";return a.extend({displayName:"core/component/service","sig/initialize":function(){var a=this;return a.publish("registry/add",a)},"sig/finalize":function(){var a=this;return a.publish("registry/remove",a)}})}),define("troopjs-core/registry/service",["../component/service","poly/object","poly/array"],function(a){"use strict";var b="services";return a.extend(function(){var a=this;a[b]={},a.add(a)},{displayName:"core/registry/service",add:function(a){this[b][a.toString()]=a},remove:function(a){delete this[b][a.toString()]},get:function(a){var c=new RegExp(a),d=this[b];return Object.keys(d).filter(function(a){return c.test(a)}).map(function(a){return d[a]})},"hub/registry/add":function(a){return this.add(a)},"hub/registry/remove":function(a){return this.remove(a)},"hub/registry/get":function(a){return this.get(a)}})}),define("troopjs-browser/application/widget",["module","../component/widget","when","troopjs-core/registry/service","poly/array"],function(a,b,c,d){"use strict";function e(a,b){var d=this,e=[a],g=d[j].get(),h=0,k=[],l=0;i.apply(e,b);var m=function(a,b){var d;return b!==!0&&(k[l++]=a),(d=g[h++])!==f?c(d.signal.apply(d,e),m):c.resolve(k)};return m(f,!0)}var f,g=Array.prototype,h=g.slice,i=g.push,j="registry";return b.extend(function(){var a=this[j]=d();h.call(arguments,2).forEach(function(b){a.add(b)})},{displayName:"browser/application/widget","sig/initialize":function(){return e.call(this,"initialize",arguments)},"sig/start":function(){var a=this,b=arguments;return e.call(a,"start",b).then(function(){return a.weave.apply(a,b)})},"sig/stop":function(){var a=this,b=arguments;return a.unweave.apply(a,b).then(function(){return e.call(a,"stop",b)})},"sig/finalize":function(){return e.call(this,"finalize",arguments)}})});