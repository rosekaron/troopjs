!function(a){a("compose",[],function(){function a(){}function b(a){if(!a)throw new Error("Compose arguments must be functions or objects");return a}function c(a,c,e){for(var f,h=c.length;h>e;e++){var i=c[e];if("function"==typeof i){var k=i.prototype;for(var l in k){f=k[l];var m=k.hasOwnProperty(l);if("function"==typeof f&&l in a&&f!==a[l]){var n=a[l];f==g?f=n:m||(d(f,l,j([].slice.call(c,0,e),!0))?f=n:d(n,l,j([i],!0))||console.error("Conflicted method "+l+", final composer must explicitly override with correct method."))}f&&f.install&&m&&!d(n,l,j([i],!0))?f.install.call(a,l):a[l]=f}}else for(var l in b(i)){var f=i[l];if("function"==typeof f){if(f.install){f.install.call(a,l);continue}if(l in a&&f==g)continue}a[l]=f}}return a}function d(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];if(e[b]==a)return!0}}function e(a,b){function c(){if(b)return b.apply(this,arguments);throw new Error("Decorator not applied")}return c.install=a,c}function f(a){return function(b){return e(function c(d){var e=this[d];(b=this[d]=e?a(this,e,b):b).install=c},b)}}function g(){throw new Error("This method is required and no implementation has been provided")}function h(){var a=[this];return a.push.apply(a,arguments),i.apply(0,a)}function i(d){function e(){var b;this instanceof e?b=this:(a.prototype=g,b=new a);for(var c=0;m>c;c++){var d=l[c],f=d.apply(b,arguments);if("object"==typeof f)if(f instanceof e)b=f;else for(var h in f)f.hasOwnProperty(h)&&(b[h]=f[h])}return b}var f=arguments,g=f.length<2&&"function"!=typeof f[0]?f[0]:c(k(b(d)),f,1);e._getBases=function(a){return a?n:l};var l=j(f),m=l.length;"object"==typeof f[f.length-1]&&(f[f.length-1]=g);var n=j(f,!0);return e.extend=h,i.secure||(g.constructor=e),e.prototype=g,e}function j(a,b){function c(a,e){a:for(var f=0;f<a.length;f++){var g=a[f],h=b&&"function"==typeof g?g.prototype:g;if(b||"function"==typeof g){var i=e&&g._getBases;if(i)c(i(b));else{for(var j=0;j<d.length;j++)if(h==d[j])continue a;d.push(h)}}}}var d=[];return c(a,!0),d}var k=Object.create?function(a){return Object.create("function"==typeof a?a.prototype:a||Object.prototype)}:function(b){a.prototype="function"==typeof b?b.prototype:b;var c=new a;return a.prototype=null,c};i._setMixin=function(a){c=a},i.Decorator=e,i.around=f(function(a,b,c){return c.call(a,b)}),i.before=f(function(a,b,c){return function(){var a=c.apply(this,arguments);return a!==m?b.apply(this,a||arguments):void 0}});var l,m=i.stop={};return i.after=f(function(a,b,c){return function(){var a=b.apply(this,arguments),d=c.apply(this,arguments);return d===l?a:d}}),i.from=function(a,b){return b?("function"==typeof a?a.prototype:a)[b]:e(function(c){if(!(this[c]="string"==typeof a?this[a]:("function"==typeof a?a.prototype:a)[b||c]))throw new Error("Source method "+b+" was not available to be renamed to "+c)})},i.create=function(a){for(var b=c(k(a),arguments,1),d=arguments.length,e=0;d>e;e++){var f=arguments[e];"function"==typeof f&&(b=f.call(b)||b)}return b},i.required=g,i.apply=function(a,b){return a?c(a,b,0):h.apply.call(i,0,b)},i.call=function(a){return c(a,arguments,1)},i})}("undefined"!=typeof define?define:function(a,b){"undefined"!=typeof module?module.exports=b():Compose=b()}),define("troopjs-core/event/emitter",["compose"],function(a){var b,c=!0,d=!1,e=Function,f="phase",g="memory",h="context",i="callback",j="length",k="head",l="tail",m="next",n="handled",o="handlers",p={},q=0,r=/^(?:initi|fin)alized?$/;return a(function(){this[o]={}},{on:function(a){var b,f,q,r,s,t,u,v=this,w=arguments,x=w[j],y=w[1],z=w[2],A=w[3],B=v[o],C=[],D=0;if(y instanceof e)z=d,y=p,s=1;else if(y===c||y===d)z=y,y=p,s=2;else if(z instanceof e)z=d,s=2;else{if(!(A instanceof e))return v;s=3}if(a in B){B=B[a],b={callback:w[s++],context:y},r=l in B?B[l][m]=b:B[k]=b;for(;x>s;)r=r[m]={callback:w[s++],context:y};if(B[l]=r,z&&g in B){for(z=B[g],f=z[n];b;)b[n]!==f?(b[n]=f,C[D++]=b,b=b[m]):b=b[m];if(z[j]>0)for(u=0;D>u;u++)t=C[u],t[i].apply(t[h],z);else for(u=0;D>u;u++)t=C[u],t[i].call(t[h])}}else{for(q=r={callback:w[s++],context:y};x>s;)r=r[m]={callback:w[s++],context:y};B[a]={head:q,tail:r}}return v},off:function(a){var c,d,f,g,n=this,q=arguments,r=q[j],s=q[1],t=q[2],u=n[o];if(s instanceof e)t=s,s=p,g=1;else{if(!(t instanceof e))return n;g=2}if(!(a in u))return n;for(u=u[a],d=u[k];r>g;){t=q[g++],c=f=d;do if(c[i]!==t||c[h]!==s)f=c;else{if(c===d){d=f=c[m];continue}f[m]=c[m]}while((c=c[m])!==b)}return d&&f?(u[k]=d,u[l]=f):(delete u[k],delete u[l]),n},emit:function(a){var b,c,d,e,l=this,p=arguments,s=l[o],t=[],u=0,v=p[n]=q++;if(a in s){for(s=s[a],s[g]=p,b=s[k];b;)b[n]!==v?(b[n]=v,t[u++]=b,b=b[m]):b=b[m];if(p[j]>0)for(e=0;u>e;e++)d=t[e],c=d[h],r.test(c[f])||d[i].apply(c,p);else for(e=0;u>e;e++)d=t[e],c=d[h],r.test(c[f])||d[i].call(c)}else p[j]>0&&(s[a]=s={},s[g]=p);return this}})}),define("troopjs-core/component/base",["../event/emitter","config"],function(a,b){var c=0,d="instanceCount",e=a.extend(function(){this[d]=c++},{displayName:"core/component",config:b});return e.prototype.toString=function(){var a=this;return a.displayName+"@"+a[d]},e}),define("troopjs-utils/deferred",["jquery"],function(a){return a.Deferred}),define("troopjs-core/pubsub/hub",["compose","../component/base"],function(a,b){var c=a.from;return a.create(b,{displayName:"core/pubsub/hub",subscribe:c(b,"on"),unsubscribe:c(b,"off"),publish:c(b,"emit")})}),define("troopjs-core/component/gadget",["compose","./base","troopjs-utils/deferred","../pubsub/hub"],function(a,b,c,d){var e,f=null,g=Function,h=/^hub(?::(\w+))?\/(.+)/,i=/^sig\/(.+)/,j=d.publish,k=d.subscribe,l=d.unsubscribe,m="memory",n="subscriptions",o="phase";return b.extend(function(){var b,d,e,h,j,k,l,m,n=this,o=n.constructor._getBases(!0),p={},q=null;for(h=o.length-1;h>=0;h--){b=o[h];a:for(q in b)if(e=b[q],e instanceof g&&(m=i.exec(q),m!==f))if(l=m[1],l in p){for(d=p[l],j=k=d.length;j--;)if(e===d[j])continue a;d[k]=e}else p[l]=[e]}a.call(n,{signal:function(a,b){var d,e,f=this,g=b;if(a in p){for(d=p[a],e=d.length;--e;)g=c(function(b){var c=d[e],h=g;b.always(function(){c.call(f,a,h)})});d[0].call(f,a,g)}else b&&b.resolve();return f}})},{displayName:"core/component/gadget","sig/initialize":function(a,b){var c,e,i,j=this,k=j[n]=[],l=f;for(l in j)c=j[l],c instanceof g&&(e=h.exec(l),e!==f&&(i=e[2],d.subscribe(i,j,e[1]===m,c),k[k.length]=[i,j,c],j[l]=f));return b&&b.resolve(),j},"sig/finalize":function(a,b){for(var c,f=this,g=f[n];(c=g.shift())!==e;)d.unsubscribe(c[0],c[1],c[2]);return b&&b.resolve(),f},publish:function(){var a=this;return j.apply(d,arguments),a},subscribe:function(){var a=this;return k.apply(d,arguments),a},unsubscribe:function(){var a=this;return l.apply(d,arguments),a},start:function(a){var b=this;return a=a||c(),c(function(d){d.then(function(){b[o]="started",a.resolveWith(b,arguments)},a.reject,a.notify),c(function(a){a.then(function(){b[o]="start",b.signal("start",d)},d.reject,d.notify),b[o]="initialize",b.signal("initialize",a)})}),b},stop:function(a){var b=this;return a=a||c(),c(function(d){d.then(function(){b[o]="finalized",a.resolveWith(b,arguments)},a.reject,a.notify),c(function(a){a.then(function(){b[o]="finalize",b.signal("finalize",d)},d.reject,d.notify),b[o]="stop",b.signal("stop",a)})}),b}})}),define("troopjs-core/component/service",["./gadget"],function(a){return a.extend({displayName:"core/component/service"})}),define("troopjs-core/component/widget",["./gadget","jquery","troopjs-utils/deferred"],function(a,b,c){function d(a,b,c){return function(){return k.call(arguments,a),c.apply(b,arguments)}}function e(a){function b(){var b=this,d=b[s],e=arguments,g=j.call(e),i=e[e.length-1];return i!==f&&i[v]instanceof h||(i=c()),c(function(c){c.then(function(){d.trigger(r,arguments),i.resolve()},i.reject,i.notify),c.notify("beforeRender",b),a.call(d,g instanceof h?g.apply(b,e):g),c.notify("afterRender",b),d.find(w).weave(c)}),b}return b}var f,g=null,h=Function,i=Array.prototype,j=i.shift,k=i.unshift,l=b.fn.trigger,m=b.fn.one,n=b.fn.bind,o=b.fn.unbind,p=b.fn.get,q=/^dom(?::(\w+))?\/([^\.]+(?:\.(.+))?)/,r="widget/refresh",s="$element",t="$proxies",u="one",v="then",w="[data-weave]",x="[data-woven]";return a.extend(function(a,c){var d,e=this;if(a===f)throw new Error("No $element provided");if(a.jquery)(d=a.get)!==p&&(a=b(d.call(a,0)));else{if(!a.nodeType)throw new Error("Unsupported widget element");a=b(a)}e[s]=a,c&&(e.displayName=c)},{displayName:"core/component/widget","sig/initialize":function(a,b){var c,e,f,i=this,j=i[s],k=i[t]=[],l=g;for(l in i)c=i[l],c instanceof h&&(e=q.exec(l),e!==g&&(f=e[2],c=d(f,i,c),(e[2]===u?m:n).call(j,f,i,c),k[k.length]=[f,c],i[l]=g));return b&&b.resolve(),i},"sig/finalize":function(a,b){for(var c,d=this,e=d[s],g=d[t];(c=g.shift())!==f;)e.unbind(c[0],c[1]);return delete d[s],b&&b.resolve(),d},weave:function(a){var b=this;return b[s].find(w).weave(a),b},unweave:function(a){var b=this;return b[s].find(x).andSelf().unweave(a),this},one:function(){var a=this;return m.apply(a[s],arguments),a},bind:function(){var a=this;return n.apply(a[s],arguments),a},unbind:function(){var a=this;return o.apply(a[s],arguments),a},trigger:function(){var a=this;return l.apply(a[s],arguments),a},before:e(b.fn.before),after:e(b.fn.after),html:e(b.fn.html),text:e(b.fn.text),append:e(b.fn.append),prepend:e(b.fn.prepend),empty:function(a){var b,c=this,d=c[s];return a?(b=d.contents().detach(),d.trigger(r,c),setTimeout(function(){var c=b.get();b.remove(),a.resolve(c)},0)):d.empty().trigger(r,c),c}})}),define("troopjs-core/dimensions/service",["../component/service"],function(a){function b(a,b,d){a.data.publish(c,b,d)}var c="dimensions",d="$element";return a.extend(function(a,b){var e=this;e[d]=a,e[c]=b},{displayName:"core/dimensions/service","sig/initialize":function(a,e){var f=this;f[d].bind(c+"."+f[c],f,b),e&&e.resolve()},"sig/start":function(a,b){var e=this;e[d].trigger("resize."+c),b&&b.resolve()},"sig/finalize":function(a,e){var f=this;f[d].unbind(c+"."+f[c],b),e&&e.resolve()}})}),define("troopjs-core/logger/console",["compose","../component/base"],function(a,b){var c=console,d=Function.prototype.bind||function(a){var b=slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a||{},b.concat(slice.call(arguments)))};return d.prototype=this.prototype||{},e.prototype=new d,e};return a.create(b,{log:d.call(c.log,c),warn:d.call(c.warn||c.log,c),debug:d.call(c.debug||c.log,c),info:d.call(c.info||c.log,c),error:d.call(c.error||c.log,c)})}),define("troopjs-core/logger/pubsub",["compose","../component/base","../pubsub/hub"],function(a,b,c){var d=Array.prototype.push,e=c.publish;return a.create(b,{log:function(){var a=["logger/log"];d.apply(a,arguments),e.apply(c,a)},warn:function(){var a=["logger/warn"];d.apply(a,arguments),e.apply(c,a)},debug:function(){var a=["logger/debug"];d.apply(a,arguments),e.apply(c,a)},info:function(){var a=["logger/info"];d.apply(a,arguments),e.apply(c,a)},error:function(){var a=["logger/error"];d.apply(a,arguments),e.apply(c,a)}})}),define("troopjs-utils/merge",[],function(){var a=Array,b=Object;return function c(d){var e,f,g,h,i=this,j=null;for(e=0,f=arguments.length;f>e;e++){d=arguments[e];for(j in d)g=d[j],h=g.constructor,j in i?h===a?i[j]=i[j].concat(g):h===b?c.call(i[j],g):i[j]=g:i[j]=g}return i}}),define("troopjs-utils/tr",[],function(){var a=typeof Number();return function(b){var c,d,e=this,f=[],g=e.length;if(typeof g===a&&0===g||g>0&&0 in e&&g-1 in e)for(c=0;g>c;c++)f.push(b.call(e,e[c],c));else if(e)for(d in e)f.push(b.call(e,e[d],d));return f}}),define("troopjs-utils/when",["jquery"],function(a){return a.when}),define("troopjs-core/logger/service",["../component/service","troopjs-utils/merge","troopjs-utils/tr","troopjs-utils/when","troopjs-utils/deferred"],function(a,b,c,d,e){function f(a,b){var f=this,g=c.call(f[m],function(b){return e(function(c){b.signal(a,c)})});return b&&d.apply(null,g).then(b.resolve,b.reject,b.notify),f}function g(a,c){var d={cat:a,href:window.location.href,browser:n,time:(new Date).getTime()};return j.call(c)===k?b.call(d,c):d.msg=c,d}function h(a){var b,c,d=this,e=d[m];for(b=0,c=e[l];c>b;b++)e[b].append(a)}var i=Array.prototype.slice,j=Object.prototype.toString,k="[object Object]",l="length",m="appenders",n=navigator.userAgent;return a.extend(function(){this[m]=i.call(arguments)},{displayName:"core/logger/service","sig/initialize":f,"sig/finalize":f,"sig/start":f,"sig/stop":f,"hub/logger/log":function(a,b){h.call(this,g("log",b))},"hub/logger/warn":function(a,b){h.call(this,g("warn",b))},"hub/logger/debug":function(a,b){h.call(this,g("debug",b))},"hub/logger/info":function(a,b){h.call(this,g("info",b))},"hub/logger/error":function(a,b){h.call(this,g("error",b))}})}),define("troopjs-utils/unique",[],function(){return function(a){var b,c,d,e,f=this,g=f.length,h=[];a:for(c=d=e=0;g>c;c++,d=0){for(b=f[c];e>d;)if(a.call(f,b,h[d++])===!0)continue a;h[e++]=b}return h}}),define("troopjs-core/pubsub/topic",["../component/base","troopjs-utils/unique"],function(a,b){function c(a,b){return a.publisherInstanceCount===b.publisherInstanceCount}var d=Object.prototype.toString,e=d.call(Array.prototype),f=a.extend(function(a,b,c){var d=this;d.topic=a,d.publisher=b,d.parent=c,d.publisherInstanceCount=b.instanceCount},{displayName:"core/pubsub/topic",trace:function(){for(var a,f,g,h,i,j=this,k=j.constructor,l="";j;){if(d.call(j)===e){for(h=b.call(j,c),g=0,i=h.length;i>g;g++)f=h[g],h[g]=f.constructor===k?f.trace():f.topic;l+=h.join(",");break}a=j.parent,l+=a?j.publisher+":":j.publisher,j=a}return l}});return f.prototype.toString=function(){return this.topic},f}),define("troopjs-core/remote/ajax",["../component/service","../pubsub/topic","jquery","troopjs-utils/merge"],function(a,b,c,d){return a.extend({displayName:"core/remote/ajax","hub/ajax":function(a,e,f){c.ajax(d.call({headers:{"x-request-id":(new Date).getTime(),"x-components":a instanceof b?a.trace():a}},e)).then(f.resolve,f.reject,f.notify)}})}),define("troopjs-core/widget/placeholder",["jquery","../component/widget"],function(a,b){function c(){var b=this,c=b[l],d=arguments,f=d[i]>0&&d[d[i]-1][j]instanceof e?g.call(d):a.Deferred();k in b?f.resolve(b[k]):a.Deferred(function(a){var e=h.call(d);e.push(a),c.attr("data-weave",b[m]).weave.apply(c,e)}).then(function(a){b[k]=a,c.triggerHandler("released",[a]),f.resolve(a)},f.reject,f.progress)}function d(){var b,c=this,d=c[l],f=arguments,m=f[i]>0&&f[f[i]-1][j]instanceof e?g.call(f):a.Deferred();return k in c?(b=c[k],delete c[k],a.Deferred(function(a){var c=h.call(f);c.push(a),d.attr("data-unweave",b).unweave.apply(d,c)}).then(function(){d.triggerHandler("held",[b]),m.resolve(b)},m.reject,m.progress),c):m.resolve()}var e=Function,f=Array.prototype,g=f.pop,h=f.slice,i="length",j="then",k="holding",l="$element",m="target";return b.extend(function(a,b,c){this[m]=c},{displayName:"core/widget/placeholder","sig/finalize":function(a,b){this.hold(b)},release:c,hold:d})}),define("troopjs-core/route/placeholder",["../widget/placeholder"],function(a){var b=null,c="route";return a.extend(function(a){this[c]=RegExp(a.data("route"))},{displayName:"core/route/placeholder","hub:memory/route":function(a,d){var e=this,f=e[c].exec(d.path);f!==b?e.release.apply(e,f.slice(1)):e.hold()}})}),define("troopjs-utils/uri",["compose"],function(a){function b(a){var c,e,f={},g=d,h=/(?:&|^)([^&=]*)=?([^&]*)/g;if(f.toString=b.toString,i.call(a)===j)for(g in a)f[g]=a[g];else for(;(c=h.exec(a))!==d;)g=c[1],g in f?(e=f[g],i.call(e)===k?e[e.length]=c[2]:f[g]=[e,c[2]]):f[g]=c[2];return f}function c(a){var b=[];return b.toString=c.toString,g.apply(b,i.call(a)===k?a:h.call(a,"/")),b}var d=null,e=Array.prototype,f=Object.prototype,g=e.push,h=String.prototype.split,i=f.toString,j=i.call(f),k=i.call(e),l=(i.call(String.prototype),i.call(Function.prototype)),m=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:([^?#]*)(?:\?([^#]*))?(?:#(.*))?)/,n="protocol",o="authority",p="path",q="query",r="anchor",s=["source",n,o,"userInfo","user","password","host","port",p,q,r],t=a.secure;a.secure=!0,b.toString=function(){var a,b,c=this,e=d,f=d,g=[],h=0;for(e in c)i.call(c[e])!==l&&(g[h++]=e);for(g.sort();h--;)if(e=g[h],f=c[e],i.call(f)===k){for(a=f.slice(0),a.sort(),b=a.length;b--;)f=a[b],a[b]=""===f?e:e+"="+f;g[h]=a.join("&")}else g[h]=""===f?e:e+"="+f;return g.join("&")},c.toString=function(){return this.join("/")};var u=a(function(a){var e,f,g,h=this;if((f=m.exec(a))!==d)for(g=f.length;g--;)e=f[g],e&&(h[s[g]]=e);q in h&&(h[q]=b(h[q])),p in h&&(h[p]=c(h[p]))});return u.prototype.toString=function(){var a,b,c=this,d=[n,"://",o,p,"?",q,"#",r];n in c||(d[0]=d[1]=""),o in c||(d[2]=""),p in c||(d[3]=""),q in c||(d[4]=d[5]=""),r in c||(d[6]=d[7]=""),a=d.length;for(;a--;)b=d[a],b in c&&(d[a]=c[b]);return d.join("")},a.secure=t,u.Path=c,u.Query=b,u}),define("troopjs-core/route/router",["../component/service","troopjs-utils/uri"],function(a,b){function c(a){var c=a.data,d=b(a.target.location.hash.replace(g,"")),e=d.toString();e!==c[f]&&(c[f]=e,c.publish(f,d))}var d="hashchange",e="$element",f="route",g=/^#/;return a.extend(function(a){this[e]=a},{displayName:"core/route/router","sig/initialize":function(a,b){var f=this;return f[e].bind(d,f,c),b&&b.resolve(),f},"sig/start":function(a,b){var c=this;return c[e].trigger(d),b&&b.resolve(),c},"sig/finalize":function(a,b){var f=this;return f[e].unbind(d,c),b&&b.resolve(),f}})}),define("troopjs-core/store/base",["compose","../component/gadget"],function(a,b){var c="storage";return b.extend({storage:a.required,set:function(a,b,d){this[c].setItem(a,JSON.stringify(b)),d&&d.resolve(b)},get:function(a,b){var d=JSON.parse(this[c].getItem(a));b&&b.resolve(d)},remove:function(a,b){this[c].removeItem(a),b&&b.resolve()},clear:function(a){this[c].clear(),a&&a.resolve()}})}),define("troopjs-core/store/local",["compose","./base"],function(a,b){return a.create(b,{displayName:"core/store/local",storage:window.localStorage})}),define("troopjs-core/store/session",["compose","./base"],function(a,b){return a.create(b,{displayName:"core/store/session",storage:window.sessionStorage})}),define("troopjs-core/widget/application",["../component/widget","troopjs-utils/deferred","troopjs-utils/when","troopjs-utils/tr"],function(a,b,c,d){function e(a,e){var f=this,h=d.call(f[g],function(c){return b(function(b){c.signal(a,b)})});return e&&c.apply($,h).then(e.resolve,e.reject,e.notify),f.publish("application/signal/"+a,e),f}var f=Array.prototype.slice,g="services";return a.extend(function(){this[g]=f.call(arguments,2)},{displayName:"core/widget/application","sig/initialize":e,"sig/start":function(a,c){var d=this;b(function(b){e.call(d,a,b)}).then(function(){d.weave(c)},c.reject,c.progress)},"sig/stop":function(a,c){var d=this;b(function(b){e.call(d,a,b)}).then(function(){d.unweave(c)},c.reject,c.progress)},"sig/finalize":e})}),define("troopjs-utils/getargs",[],function(){var a=Array.prototype.push,b=String.prototype.substring,c=/^(?:false|true)$/i,d=/^true$/i,e=/^\d+$/;return function(){var f,g,h,i,j,k,l=this,m=[],n=!1;for(g=h=i=0,f=l.length;f>i;i++)switch(j=l.charAt(i)){case'"':case"'":n===j?(n=!1,a.call(m,b.call(l,g,h))):n=j,g=h=i+1;break;case",":if(n){h=i+1;break}g!==h&&(k=b.call(l,g,h),c.test(k)?k=d.test(k):e.test(k)&&(k=+k),a.call(m,k)),g=h=i+1;break;case" ":case"	":if(n){h=i+1;break}g===h&&(g=h=i+1);break;default:h=i+1}return g!==h&&(k=b.call(l,g,h),c.test(k)?k=d.test(k):e.test(k)&&(k=+k),a.call(m,k)),m}}),define("troopjs-jquery/action",["jquery","troopjs-utils/getargs"],function(a,b){function c(a){return a?a+"."+j:h}function d(b){var c=a(this),d=i.call(arguments,1),e=k in b?b[k].type:j,f=b[j];b.type=j+"/"+f+"."+e,c.trigger(b,d),b.result!==g&&(b.type=j+"/"+f+"!",c.trigger(b,d),b.result!==g&&(b.type=j+"."+e,c.trigger(b,d)))}function e(c){var d=a(c.target).closest("[data-action]");if(0!==d.length){var e=d.data(),g=l.exec(e[j]);if(g!==h){var i=g[1],k=g[2],n=g[3];if(k===f||RegExp(k.split(m).join("|")).test(c.type)){var o=n!==f?b.call(n):[];a.each(o,function(a,b){b in e&&(o[a]=e[b])}),d.trigger(a.Event(c,{type:j+"!",action:i}),o),c.stopPropagation()}}}}var f,g=!1,h=null,i=Array.prototype.slice,j="action",k="originalEvent",l=/^([\w\d\s_\-\/]+)(?:\.([\w\.]+))?(?:\((.*)\))?$/,m=/\.+/;a.event.special[j]={setup:function(b){a(this).bind(j,b,d)},add:function(b){var d=a.map(b.namespace.split(m),c);0!==d.length&&a(this).bind(d.join(" "),e)},remove:function(b){var d=a.map(b.namespace.split(m),c);0!==d.length&&a(this).unbind(d.join(" "),e)},teardown:function(){a(this).unbind(j,d)}},a.fn[j]=function(b){return a(this).trigger({type:j+"!",action:b},i.call(arguments,1))}}),define("troopjs-jquery/destroy",["jquery"],function(a){a.event.special.destroy={remove:function(b){var c=this;b.handler.call(c,a.Event({type:b.type,data:b.data,namespace:b.namespace,target:c}))}}}),define("troopjs-jquery/dimensions",["jquery"],function(a){function b(a,b){return b-a}function c(){var b=a(this),c=b.width(),d=b.height();a.each(a.data(self,e),function(a,f){var k,l,m,n=f[g],o=f[h];for(m=n.length,k=n[m-1];n[--m]<c;)k=n[m];for(m=o.length,l=o[m-1];o[--m]<d;)l=o[m];(k!==f[i]||l!==f[j])&&(f[i]=k,f[j]=l,b.trigger(e+"."+a,[k,l]))})}var d=null,e="dimensions",f="resize."+e,g="w",h="h",i="_"+g,j="_"+h;a.event.special[e]={setup:function(){a(this).bind(f,c).data(e,{})},add:function(c){for(var f,i=this,j=c.namespace,k={},l=k[g]=[],m=k[h]=[],n=/(w|h)(\d+)/g;(f=n.exec(j))!==d;)k[f[1]].push(parseInt(f[2],10));l.sort(b),m.sort(b),a.data(i,e)[j]=k},remove:function(b){delete a.data(this,e)[b.namespace]},teardown:function(){a(this).removeData(e).unbind(f,c)}}}),define("troopjs-jquery/hashchange",["jquery"],function(a){function b(a){var b=g.exec(a.location.href);return b&&b[1]?decodeURIComponent(b[1]):""}function c(a){var b,c=this;c.element=b=a.createElement("iframe"),b.src="about:blank",b.style.display="none"}var d="interval",e="hashchange",f="on"+e,g=/#(.*)$/,h=/\?/,i=0;c.prototype={getElement:function(){return this.element},getHash:function(){return this.element.contentWindow.frameHash},update:function(a){var b=this,c=b.element.contentWindow.document;b.getHash()!==a&&(c.open(),c.write("<html><head><title>' + document.title + '</title><script type='text/javascript'>var frameHash='"+a+"';</script></head><body>&nbsp;</body></html>"),c.close())}},a.event.special[e]={setup:function(){var g=this;if(f in g)return!1;if(!a.isWindow(g))throw new Error("Unable to bind 'hashchange' to a non-window object");var j=a(g),k=b(g),l=g.location;j.data(d,g.setInterval(i?function(){var a=g.document,d="file:"===l.protocol,f=new c(a);return a.body.appendChild(f.getElement()),f.update(k),function(){var a,c=k,i=b(g),m=f.getHash();m!==k&&m!==i?(a=decodeURIComponent(m),k!==a&&(k=a,f.update(k),j.trigger(e,[a,c])),l.hash="#"+encodeURI(d?m.replace(h,"%3F"):m)):i!==k&&(a=decodeURIComponent(i),k!==a&&(k=a,j.trigger(e,[a,c])))}}():function(){var a,c=k,d=b(g);d!==k&&(a=decodeURIComponent(d),k!==a&&(k=a,j.trigger(e,[a,c])))},25))},teardown:function(){var b=this;return f in b?!1:void b.clearInterval(a.data(b,d))}}}),define("troopjs-jquery/resize",["jquery"],function(a){function b(b,c){var d=a.data(c),h=a(c),i=h.width(),j=h.height();(i!==d[f]||j!==d[g])&&h.trigger(e,[d[f]=i,d[g]=j])}function c(){h.each(b)}var d=null,e="resize",f="w",g="h",h=a([]),i=d;a.event.special[e]={setup:function(){var b=this;if(a.isWindow(b))return!1;var d=a.data(b,e,{}),j=a(b);d[f]=j.width(),d[g]=j.height(),h=h.add(b),1===h.length&&(i=setInterval(c,100))},teardown:function(){var b=this;return a.isWindow(b)?!1:(a.removeData(b,e),h=h.not(b),void(0===h.length&&i!==d&&clearInterval(i)))}}}),define("troopjs-jquery/weave",["jquery","troopjs-utils/getargs","require","./destroy"],function(a,b,c){function d(){a(this).unweave()}var e,f=Function,g=Array.prototype,h=g.push,i=g.slice,j=g.pop,k=a.when,l="then",m="widgets",n="weave",o="unweave",p="woven",q="destroy",r="length",s="data-",t=s+n,u=s+p,v=s+o,w="["+t+"]",x="["+u+"]",y=/[\s,]+/;a.fn[n]=function(){var g=a(this),o=arguments,s=[],v=0,x=o[r]>0&&o[o[r]-1][l]instanceof f?j.call(o):a.Deferred();return g.filter(w).filter(function(){var b=a._data(this,"events"),c=b&&a.grep(b[q]||!1,function(a){return a.handler===d}).length>0;return!c}).on(q,d).end().each(function(d,f){var g,j,l,o,q,w=a(f),x=w.data(),y=x[m]||(x[m]=[]),z=y[r],A=[],B=0,C=w.attr(t),D=/[\s,]*([\w_\-\/\.]+)(?:\(([^\)]+)\))?/g;for(w.removeAttr(t);null!==(g=D.exec(C));){for(j=[w,g[1]],j[n]=a.trim(g[0]),g[2]&&h.apply(j,b.call(g[2])),l=2,o=j[r];o>l;l++)q=j[l],j[l]=q in x?x[q]:q;A[B++]=j}a.each(A,function(b,d){var e=a.Deferred(),f=y[z++]=A[b]=e.promise();f[n]=d[n],c([d[1]],function(b){var c,g=a.Deferred();g.then(function(){e.resolve(c)},e.reject,e.notify);try{c=b.apply(b,d),f[p]=c.toString(),c.start(g)}catch(h){g.reject(h)}},e.reject)}),s[v++]=k.apply(a,A).then(function(){var b=i.call(arguments);h.apply(x[p]||(x[p]=[]),b);var c=w.attr(u);c=c===e?[]:[c],h.apply(c,a.map(b,function(a){return a.toString()})),0!==c[r]?w.attr(u,c.join(" ")):w.removeAttr(u),w.triggerHandler(n,b)}).promise()}),k.apply(a,s).then(x.resolve,x.reject,x.notify),g},a.fn[o]=function(){var b=a(this),c=arguments,d=[],g=0,q=c[r]>0&&c[c[r]-1][l]instanceof f?j.call(c):a.Deferred();return b.filter(x).each(function(b,c){var f,j,l,q,s,w=a(c),x=w.data(),z=x[m]||(x[m]=[]),A=x[p]||(x[p]=[]),B=[],C=0,D=w.attr(v);if(w.removeAttr(v),D){for(s=RegExp(a.map(D.split(y),function(a){return"^"+a}).join("|"),"m"),j=l=0,q=z[r];q>j;j++)f=z[j],s.test(f[p])?B[C++]=f:z[l++]=f;z[r]=A[r]=l,k.apply(a,z).then(function(){var a=i.call(arguments);0!==a[r]?w.attr(u,a.join(" ")):w.removeAttr(u)})}else{for(j=0,q=z[r];q>j;j++)B[C++]=z[j];z[r]=A[r]=0,w.removeAttr(u)}a.each(B,function(b,c){var f=a.Deferred(),j=B[b]=f.promise();j[n]=c[n],c.then(function(b){var c=a.Deferred();c.then(function(){f.resolve(b)},f.reject,f.notify);try{b.stop(c)}catch(d){c.reject(d)}}),d[g++]=k.apply(a,B).then(function(){var b=i.call(arguments),c=w.attr(t);c=c===e?[]:[c],h.apply(c,a.map(B,function(a){return a[n]})),0!==c[r]?w.attr(t,c.join(" ")):w.removeAttr(t),w.triggerHandler(o,b)}).promise()})}),k.apply(a,d).then(q.resolve,q.reject,q.notify),b},a.fn[p]=function(){var b=[],c=arguments.length>0?RegExp(a.map(arguments,function(a){return"^"+a+"$"}).join("|"),"m"):e;return a(this).each(function(d,f){a.hasData(f)&&h.apply(b,c===e?a.data(f,p):a.map(a.data(f,p)||!1,function(a){return c.test(a.displayName)?a:e}))}),b}}),define("troopjs-requirejs/template",[],function(){function a(a){function b(a,b,c){return l[m]=b?'" +'+c+'+ "':'";'+c+'o += "',"<%"+String(m++)+"%>"}function j(a,b){return l[b]}function k(a,b){return i[b]||b}var l=[],m=0;return('function template(data) { var o = "'+a.replace(c,"").replace(d,b).replace(f,k).replace(e,j)+'"; return o; }').replace(g,h)}var b={node:function(){var a=require.nodeRequire("fs");return function(b,c){c(a.readFileSync(b,"utf8"))}},browser:function(){var a,b,c,d=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];if("undefined"!=typeof XMLHttpRequest)b=XMLHttpRequest;else{for(c=0;3>c;c++){a=d[c];try{new ActiveXObject(a),b=function(){return new ActiveXObject(a)};break}catch(e){}}if(!b)throw new Error("XHR: XMLHttpRequest not available")}return function(a,c){var d=new b;d.open("GET",a,!0),d.onreadystatechange=function(){4===d.readyState&&c(d.responseText)},d.send(null)}},rhino:function(){var a="utf-8",b=java.lang.System.getProperty("line.separator");return function(c,d){var e,f=new java.io.File(c),g=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),a)),h=new java.lang.StringBuffer,i="";try{for(e=g.readLine(),e&&e.length()&&65279===e.charAt(0)&&(e=e.substring(1)),h.append(e);null!==(e=g.readLine());)h.append(b),h.append(e);i=String(h.toString())}finally{g.close()}d(i)}},borked:function(){return function(){throw new Error("Environment unsupported.")}}},c=/^[\n\t\r]+|[\n\t\r]+$/g,d=/<%(=)?([\S\s]*?)%>/g,e=/<%(\d+)%>/gm,f=/(["\n\t\r])/gm,g=/o \+= "";| \+ ""/gm,h="",i={'"':'\\"',"\n":"\\n","	":"\\t","\r":"\\r"},j={},k=b["undefined"!=typeof process&&process.versions&&process.versions.node?"node":"undefined"!=typeof window&&window.navigator&&window.document||"undefined"!=typeof importScripts?"browser":"undefined"!=typeof Packages?"rhino":"borked"]();return{load:function(b,c,d,e){var f=c.toUrl(b);k(f,function(g){try{g="define(function() { return "+a(g,b,f,e.template)+"; })"}catch(h){throw h.message="In "+f+", "+h.message,h}e.isBuild?j[b]=g:g+="\n//@ sourceURL='"+f+"'",d.fromText(b,g),c([b],function(a){d(a)})})},write:function(a,b,c){j.hasOwnProperty(b)&&c.asModule(a+"!"+b,j[b])}}}),define("troopjs-utils/callbacks",["jquery"],function(a){return a.Callbacks}),define("troopjs-utils/each",["jquery"],function(a){return a.each}),define("troopjs-utils/grep",["jquery"],function(a){return a.grep});